<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CYS Storefront</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="hero">
      <img id="brand-logo" alt="Brand logo" />
      <div class="hero-text">
        <h1 id="site-title">Storefront</h1>
        <p id="site-subtitle"></p>
      </div>
    </div>
  </header>

  <main>
    <div id="grid" class="grid"></div>
  </main>

  <footer class="site-footer">
    © <span id="year"></span> <span id="brand-name">Storefront</span> — Powered by Notion & Stripe
  </footer>

  <script src="app.js" defer></script>
  <div id="customizer" hidden>
  <div class="panel">
    <h3>Customizer</h3>
    <label>Heading <input id="c-heading"></label>
    <label>Subheading <input id="c-subheading"></label>
    <label>Accent <input id="c-accent" type="color"></label>
    <label>Button <input id="c-btn" type="color"></label>
    <button id="c-apply">Preview</button>
    <button id="c-copy">Copy JSON</button>
  </div>
</div>
<script>
  if (location.search.includes("edit=1")) {
    const el = document.getElementById("customizer");
    el.hidden = false;
    const q = s=>document.querySelector(s);
    const apply = ()=>{
      const out = {
        heading: q("#c-heading").value || undefined,
        subheading: q("#c-subheading").value || undefined,
        theme: {
          accent: q("#c-accent").value || undefined,
          btn: q("#c-btn").value || undefined
        }
      };
      // apply live
      if (out.heading) document.getElementById("site-title").textContent = out.heading;
      if (out.subheading!=null) document.getElementById("site-subtitle").textContent = out.subheading;
      if (out.theme?.accent) document.documentElement.style.setProperty("--accent", out.theme.accent);
      if (out.theme?.btn) document.documentElement.style.setProperty("--btn", out.theme.btn);
      return out;
    };
    q("#c-apply").onclick = apply;
    q("#c-copy").onclick = ()=>{
      apply();
      navigator.clipboard.writeText(JSON.stringify(apply(), null, 2));
      alert("Copied JSON. Paste into data/client.json and commit.");
    };
  }
</script>
<style>
  #customizer .panel { position: fixed; right: 12px; bottom: 12px; background:#0b1220; color:#e5f2ff; border:1px solid #22334a; border-radius:12px; padding:12px; width:280px; z-index:9999; display:grid; gap:8px;}
  #customizer label { display:grid; gap:6px; font-size:.9rem; }
  #customizer input { padding:6px 8px; border-radius:8px; border:1px solid #22334a; background:#0f172a; color:#e5f2ff;}
  #customizer button { padding:8px 10px; border-radius:8px; border:0; background:#0ea5e9; color:#fff; cursor:pointer;}
  #customizer h3 { margin:0 0 4px; font-size:1rem; }
</style>

<!-- Customizer Panel -->
<div id="editor" class="editor hidden" aria-hidden="true">
  <div class="editor-inner">
    <div class="editor-head">
      <h3>Storefront Customizer</h3>
      <button id="ed-close" class="ed-btn">✕</button>
    </div>

    <div class="ed-grid">
      <label>Store Name
        <input id="ed-name" type="text" placeholder="CYS Storefront">
      </label>
      <label>Subtitle
        <input id="ed-sub" type="text" placeholder="Official merch • quick checkout via Stripe">
      </label>

      <label>Logo URL
        <input id="ed-logo" type="url" placeholder="assets/branding/cys/logo.jpg">
      </label>
      <label>Hero URL
        <input id="ed-hero" type="url" placeholder="assets/branding/cys/hero.jpg">
      </label>
      <label>Watermark URL (optional)
        <input id="ed-watermark" type="url" placeholder="assets/branding/cys/watermark.png">
      </label>

      <label>Accent Color
        <input id="ed-accent" type="text" placeholder="#0f172a">
      </label>
      <label>Button Color
        <input id="ed-btn" type="text" placeholder="#1992ff">
      </label>
      <label>Card Radius (px)
        <input id="ed-radius" type="number" min="0" step="1" placeholder="16">
      </label>
      <label>Grid Columns (1–6)
        <input id="ed-cols" type="number" min="1" max="6" step="1" placeholder="4">
      </label>
    </div>

    <div class="editor-actions">
      <button id="ed-apply" class="ed-primary">Apply</button>
      <button id="ed-copy">Copy JSON</button>
      <button id="ed-download">Download JSON</button>
      <button id="ed-reset">Reset</button>
    </div>
    <p class="ed-note">
      Changes preview instantly. Use <b>Copy JSON</b> or <b>Download JSON</b>, then paste/replace
      <code>data/client.json</code> and commit.
    </p>
  </div>
</div>

<script src="scripts/customizer.js"></script>
</body>
</html>